{% extends "layout.html" %}
{% block content %}
<style>
    .controller-box{
        position:relative;
        text-align: center;
    }     

    .controller-box .joystick_interface{
        position:absolute;
        left:5px;
        top:190px;
    }

    .controller-box .menu{
        position:absolute;
        left:5px;
    }
</style>
<script src="//code.jquery.com/jquery-3.0.0-alpha1.min.js"></script>
<script src="../static/js/joystick_elements.js"></script>
<script src="../static/js/joystick.js"></script>
<script>
    var sendCommand=(command,params={})=>{
        console.log({action:'sendCommand',command:command,params:params})   
        params['command']=command
        $.post("/api/command/",params).done((json)=>{
            console.log({action:'sendCommand',json:json})
        },'json')
    }

    $( function() {
        $( ".joystick" ).element().init({
            move:    function( x, y, rx, ry ) {},
            hold:    function() {},
            release: function() {}
        });
    });
</script>
<div class="controller-box">
    <h1>Remote Controller</h1>
</div>

<div class="controller-box">
    <img src="../static/images/video_view.jpg" style="float:left; width:660px;height:300px;">
    <div data-role="controlgroup" data-type="horizontal">
        <a href="#" data-role="button" onclick="sendCommand('takeOff'); return false">Take Off</a>
        <a href="#" data-role="button" onclick="sendCommand('land'); return false">Land</a>
    </div>

    <div class="joystick_interface" style="display:flex; float:left;">
        <div data-jquery-element="joystick"></div>
    </div>

    <div class="menu">
        <button class="menu" type="button"><img src="../static/images/icons-png/bars-black.png"></button>
    </div>
</div>


{% endblock %}