{% extends "layout.html" %}
{% block content %}
<style>
    .controller-box{
        position:relative;
        text-align: center;
    }     

    .controller-box .joystick_interface{
        position:absolute;
        left:5px;
        top:190px;
    }
</style>
<script src="../static/js/joystick_elements.js"></script>
<script src="../static/js/joystick.js"></script>
<script>
    var sendCommand=(command,params={})=>{
        console.log({action:'sendCommand',command:command,params:params})   
        params['command']=command
        $.post("/api/command/",params).done((json)=>{
            console.log({action:'sendCommand',json:json})
        },'json')
    }

    $( function() {
        $( ".joystick" ).element().init({
            move:    function( x, y, rx, ry ) {},
            hold:    function() {},
            release: function() {}
        });
    });
</script>
<div class="controller-box">
    <h1>Remote Controller</h1>
</div>

<div class="controller-box">
    <div data-role="collapsibleset" data-filter="true" data-inset="true" id="collapsiblesetForFilter" data-input="#searchForCollapsibleSet" style="width: 130px;">
        <div data-role="collapsible">
            <h3>Side Bar</h3>
            <ul data-role="listview" data-inset="false">
                <a href="#" data-role="button" onclick="sendCommand('takeOff'); return false">Take Off</a>
                <a href="#" data-role="button" onclick="sendCommand('land'); return false">Land</a>
                <a href="#" data-role="button" onclick="sendCommand('stop'); return false">Hover</a>
            </ul>
        </div>
    </div>
    <img src="../static/css/images/video_view.jpg" style="float:left; width:660px;height:300px;">

    <div class="joystick_interface" style="display:flex; float:left;">
        <div data-jquery-element="joystick"></div>
    </div>
</div>


{% endblock %}